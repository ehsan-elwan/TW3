<html>
    <head>
        <title> State </title>
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">
            google.charts.load('current', {'packages': ['bar']});
            google.charts.setOnLoadCallback(drawChart);

            function getRandomColor() {
                var letters = '0123456789ABCDEF';
                var color = '#';
                for (var i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }




            function drawChart() {
                

                $.ajax({
                    url: "Student",
                    data: {"set": "graph0"},
                    dataType: "json",
                    async: true,
                    error: function (a,b,c){
                        console.log(b);
                    },
                    success: function (res) {
                        
                        var array = [["Sigle", "Average", { role: 'style' }]];
                        for (key in res) {
                            array.push([key, res[key],'color: '+getRandomColor()]);
                            
                        }
                        var data = new google.visualization.arrayToDataTable(array);
                        var options = {
                            chart: {
                                title: 'Students average',
                                subtitle: 'Students average in all Spec: 2014-2017'
                            }
                        };
                        var chart = new google.charts.Bar(document.getElementById('graph0'));
                        chart.draw(data, google.charts.Bar.convertOptions());
                    }
                });

                $.ajax({
                    url: "Student",
                    data: {"set": "graph1"},
                    dataType: "json",
                    async: true,
                    success: function (res) {

                        var array = [["Graph_1", "Employed students ", "Looking for a job", "In school"]];
                        for (key in res) {
                            var tmp = res[key][0];
                            array.push([key, tmp.withjob, tmp.withoutjob, tmp.insch]);
                        }
                        var data = new google.visualization.arrayToDataTable(array);
                        var options = {
                            chart: {
                                title: 'Students status',
                                subtitle: 'Employed students, looking for a job, in school: 2014-2017'
                            }
                        };
                        var chart = new google.charts.Bar(document.getElementById('graph1'));
                        chart.draw(data, google.charts.Bar.convertOptions(options));    
                    }
                });
            }
            ;

        </script>
    </head>
    <body>
        <div id="graph0" style="height: 500px;"></div>
        <div id="graph1" style="height: 500px;"></div>
    </body>
</html>